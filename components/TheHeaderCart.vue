<template>
  <NuxtLink to="/cart">
    <div class="cart">
      <svg
        class="cart_icon"
        width="29"
        height="26"
        viewBox="0 0 29 26"
        fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <rect width="29" height="26" fill="#E5E5E5" />
        <g clip-path="url(#clip0_0_1)">
          <rect
            width="1440"
            height="1764"
            transform="translate(-1227 -80)"
            fill="white" />
          <g opacity="0.1">
            <g filter="url(#filter0_d_0_1)">
              <rect x="-1227" y="-35" width="1440" height="95" fill="white" />
            </g>
          </g>
          <mask id="path-2-inside-1_0_1" fill="white">
            <path
              d="M27.8406 17.9344H9.23123L10.1656 16.0312L25.6906 16.0031C26.2156 16.0031 26.6656 15.6281 26.7593 15.1094L28.9093 3.075C28.9656 2.75937 28.8812 2.43438 28.675 2.1875C28.573 2.066 28.4459 1.96813 28.3024 1.90068C28.1588 1.83323 28.0023 1.79781 27.8437 1.79688L8.09373 1.73125L7.92498 0.9375C7.81873 0.43125 7.36248 0.0625 6.84373 0.0625H2.0156C1.72303 0.0625 1.44245 0.178722 1.23557 0.385598C1.0287 0.592474 0.912476 0.873058 0.912476 1.16563C0.912476 1.45819 1.0287 1.73878 1.23557 1.94565C1.44245 2.15253 1.72303 2.26875 2.0156 2.26875H5.94998L6.68748 5.775L8.5031 14.5656L6.1656 18.3813C6.04421 18.5451 5.9711 18.7396 5.95453 18.9429C5.93796 19.1461 5.9786 19.3499 6.07185 19.5312C6.25935 19.9031 6.63748 20.1375 7.05623 20.1375H9.01873C8.60035 20.6932 8.37436 21.37 8.37498 22.0656C8.37498 23.8344 9.81248 25.2719 11.5812 25.2719C13.35 25.2719 14.7875 23.8344 14.7875 22.0656C14.7875 21.3687 14.5562 20.6906 14.1437 20.1375H19.1781C18.7597 20.6932 18.5337 21.37 18.5343 22.0656C18.5343 23.8344 19.9719 25.2719 21.7406 25.2719C23.5094 25.2719 24.9468 23.8344 24.9468 22.0656C24.9468 21.3687 24.7156 20.6906 24.3031 20.1375H27.8437C28.45 20.1375 28.9468 19.6437 28.9468 19.0344C28.945 18.7421 28.8277 18.4624 28.6205 18.2564C28.4132 18.0503 28.1329 17.9345 27.8406 17.9344V17.9344ZM8.5531 3.90625L26.5469 3.96562L24.7843 13.8344L10.65 13.8594L8.5531 3.90625ZM11.5812 23.0531C11.0375 23.0531 10.5937 22.6094 10.5937 22.0656C10.5937 21.5219 11.0375 21.0781 11.5812 21.0781C12.125 21.0781 12.5687 21.5219 12.5687 22.0656C12.5687 22.3275 12.4647 22.5787 12.2795 22.7639C12.0943 22.9491 11.8431 23.0531 11.5812 23.0531V23.0531ZM21.7406 23.0531C21.1969 23.0531 20.7531 22.6094 20.7531 22.0656C20.7531 21.5219 21.1969 21.0781 21.7406 21.0781C22.2844 21.0781 22.7281 21.5219 22.7281 22.0656C22.7281 22.3275 22.6241 22.5787 22.4389 22.7639C22.2537 22.9491 22.0025 23.0531 21.7406 23.0531V23.0531Z" />
          </mask>
          <path
            d="M27.8406 17.9344H9.23123L10.1656 16.0312L25.6906 16.0031C26.2156 16.0031 26.6656 15.6281 26.7593 15.1094L28.9093 3.075C28.9656 2.75937 28.8812 2.43438 28.675 2.1875C28.573 2.066 28.4459 1.96813 28.3024 1.90068C28.1588 1.83323 28.0023 1.79781 27.8437 1.79688L8.09373 1.73125L7.92498 0.9375C7.81873 0.43125 7.36248 0.0625 6.84373 0.0625H2.0156C1.72303 0.0625 1.44245 0.178722 1.23557 0.385598C1.0287 0.592474 0.912476 0.873058 0.912476 1.16563C0.912476 1.45819 1.0287 1.73878 1.23557 1.94565C1.44245 2.15253 1.72303 2.26875 2.0156 2.26875H5.94998L6.68748 5.775L8.5031 14.5656L6.1656 18.3813C6.04421 18.5451 5.9711 18.7396 5.95453 18.9429C5.93796 19.1461 5.9786 19.3499 6.07185 19.5312C6.25935 19.9031 6.63748 20.1375 7.05623 20.1375H9.01873C8.60035 20.6932 8.37436 21.37 8.37498 22.0656C8.37498 23.8344 9.81248 25.2719 11.5812 25.2719C13.35 25.2719 14.7875 23.8344 14.7875 22.0656C14.7875 21.3687 14.5562 20.6906 14.1437 20.1375H19.1781C18.7597 20.6932 18.5337 21.37 18.5343 22.0656C18.5343 23.8344 19.9719 25.2719 21.7406 25.2719C23.5094 25.2719 24.9468 23.8344 24.9468 22.0656C24.9468 21.3687 24.7156 20.6906 24.3031 20.1375H27.8437C28.45 20.1375 28.9468 19.6437 28.9468 19.0344C28.945 18.7421 28.8277 18.4624 28.6205 18.2564C28.4132 18.0503 28.1329 17.9345 27.8406 17.9344V17.9344ZM8.5531 3.90625L26.5469 3.96562L24.7843 13.8344L10.65 13.8594L8.5531 3.90625ZM11.5812 23.0531C11.0375 23.0531 10.5937 22.6094 10.5937 22.0656C10.5937 21.5219 11.0375 21.0781 11.5812 21.0781C12.125 21.0781 12.5687 21.5219 12.5687 22.0656C12.5687 22.3275 12.4647 22.5787 12.2795 22.7639C12.0943 22.9491 11.8431 23.0531 11.5812 23.0531V23.0531ZM21.7406 23.0531C21.1969 23.0531 20.7531 22.6094 20.7531 22.0656C20.7531 21.5219 21.1969 21.0781 21.7406 21.0781C22.2844 21.0781 22.7281 21.5219 22.7281 22.0656C22.7281 22.3275 22.6241 22.5787 22.4389 22.7639C22.2537 22.9491 22.0025 23.0531 21.7406 23.0531V23.0531Z"
            stroke="white"
            stroke-width="0.4"
            mask="url(#path-2-inside-1_0_1)" />
        </g>
        <defs>
          <filter
            id="filter0_d_0_1"
            x="-1242"
            y="-48"
            width="1470"
            height="125"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              result="hardAlpha" />
            <feOffset dy="2" />
            <feGaussianBlur stdDeviation="7.5" />
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 0.172549 0 0 0 0 0.196078 0 0 0 0 0.258824 0 0 0 0.12 0" />
            <feBlend
              mode="normal"
              in2="BackgroundImageFix"
              result="effect1_dropShadow_0_1" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="effect1_dropShadow_0_1"
              result="shape" />
          </filter>
          <clipPath id="clip0_0_1">
            <rect
              width="1440"
              height="1764"
              fill="white"
              transform="translate(-1227 -80)" />
          </clipPath>
        </defs>
      </svg>
      <div class="cart_info">
        <h4 class="title">Ваша корзина</h4>
        <div class="count">{{ getTotalQuantity }}</div>
        <div class="total">{{ getTotalPrice }}&nbsp;&#8381;</div>
      </div>
    </div>
  </NuxtLink>
</template>
<script>
export default {
  name: "HeaderCart",
  computed: {
    getTotalPrice() {
      const count = this.$store.getters["cart/cartTotalPrice"];
      return this.addSpace(count);
    },
    getTotalQuantity() {
      const count = this.$store.getters["cart/cartTotalQuantity"];
      return `${count} ${this.getEnding(count)}`;
    },
  },
  setup() {
    const getEnding = useNuxtApp().addEnding;
    const addSpace = useNuxtApp().addSpace;
    return {
      getEnding,
      addSpace,
    };
  },
};
</script>

<style lang="scss" scoped>
a {
  text-decoration: none;
}
.cart {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: center;
  margin-top: 64px;

  &_icon {
    height: 25px;
    width: 28px;
    fill: #0069b4;
    stroke: #0069b4;
  }

  &_info {
    font-size: 12px;
    line-height: 17px;
    @include font_lato_reg;
    color: $col_black_1;

    & .title {
      margin: 0;
      font-size: 14px;
      line-height: 21px;
    }
    & .count {
      color: $col_gray_1;
    }
    & .total {
    }
  }
}
</style>
